<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta charset="UTF-8" />
    <title>SeuChef - <ui:insert name="titulo">Bem-vindo</ui:insert></title>
    <h:outputStylesheet name="style.css" />
</h:head>

<h:body>
    <header id="cabecalho">
        <h:form id="frmLoginHeader">
            <h:panelGroup rendered="#{sessionBean.usuarioLogado == null}">
                <p:commandButton value="Cadastrar"
                                 oncomplete="PF('dlgCadastro').show();"
                                 styleClass="ui-button-secondary"
                                 resetValues="true"
                                 update=":frmCadastro" />
                <p:commandButton value="JÃ¡ tenho uma conta"
                                 oncomplete="PF('dlgLogin').show();"
                                 styleClass="ui-button-secondary"
                                 resetValues="true"
                                 update=":frmLogin" />
            </h:panelGroup>

            <h:panelGroup rendered="#{sessionBean.usuarioLogado != null}">
                <h:outputText value="Bem-vindo, #{sessionBean.usuarioLogado.nome}!" style="margin-right: 10px;" />

                <p:commandButton value="Sair"
                                 action="#{sessionBean.logout}"
                                 icon="pi pi-power-off"
                                 styleClass="ui-button-danger" />
            </h:panelGroup>
        </h:form>
    </header>

    <div id="conteudo">
        <ui:insert name="corpo" />
    </div>

    <footer id="rodape">
        <p>2026 - Todos os direitos reservados.</p>
    </footer>

    <p:dialog widgetVar="dlgCadastro"
              header="Novo Cadastro"
              modal="true"
              responsive="true"
              resizable="false">

        <p:ajax event="close"
                update=":frmCadastro"
                listener="#{cadastroBean.limparFormulario}">

            <p:resetInput target=":frmCadastro" />

        </p:ajax>

        <ui:include src="/pages/cadastro.xhtml" />

    </p:dialog>

    <p:dialog widgetVar="dlgLogin" header="Login" modal="true" responsive="true">
        <ui:include src="/pages/login.xhtml" />
    </p:dialog>
</h:body>
</html>